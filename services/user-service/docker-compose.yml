version: "3.8"

services:
  user-service-dev:
    profiles: ["dev"]
    build:
      context: . # Build using the Dockerfile in the current folder
      dockerfile: Dockerfile
    container_name: user-service-dev
    ports:
      - "4000:4000"
    volumes:
      - .:/app # Mount code for hot-reloading
      - /app/node_modules # Add this anonymous volume
      - ../../serviceAccountKey.json:/app/serviceAccountKey.json:ro # Mount service account key
    environment:
      - PORT=${USER_PORT}
      - QUESTION_SERVICE_URL=${AUTH_QUESTION_SERVICE_URL}
      # - MATCHING_SERVICE_URL=${AUTH_MATCHING_SERVICE_URL}
      - COLLAB_SERVICE_URL=${AUTH_COLLAB_SERVICE_URL}
      - GOOGLE_APPLICATION_CREDENTIALS=/app/serviceAccountKey.json
